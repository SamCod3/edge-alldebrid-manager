<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AllDebrid Manager</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="container">
    <header>
      <div class="header-top">
        <h1>AllDebrid Manager</h1>
        <div class="header-actions">
          <button id="refresh-btn" title="Recargar lista">ğŸ”„</button>
          <button id="settings-btn" title="ConfiguraciÃ³n">âš™ï¸</button>
        </div>
      </div>

      <div class="search-bar-container">
        <input type="text" id="search-input" placeholder="ğŸ” Buscar archivo..." class="search-input" disabled>
      </div>
      <div class="tabs">
        <button id="tab-completed" class="tab-item active">âœ… Completados</button>
        <button id="tab-downloading" class="tab-item">â¬‡ï¸ Descargando</button>
      </div>
    </header>

    <div id="config-view" class="view-section hidden">
      <div class="card">
        <h3>Conectar Cuenta</h3>
        <p class="info-text">Introduce tu API Key para gestionar tus ficheros.</p>

        <input type="text" id="api-key-input" placeholder="Pegar API Key aquÃ­..." autocomplete="off" />

        <button id="save-key-btn" class="primary-btn">Validar y Guardar</button>

        <div id="config-feedback" class="feedback-msg"></div>

        <p class="help"><small>Obtenla en tu perfil de AllDebrid > API Key.</small></p>

        <!-- API KEY MANAGER -->
        <div id="key-manager-section" class="key-manager mt-4">
          <hr style="border-color:#444; margin: 20px 0;">
          <h4>GestiÃ³n de Claves</h4>
          <div id="km-loading" class="hidden">Obteniendo claves web...</div>
          <div id="km-login-req" class="hidden" style="color:#e74c3c; font-size:0.9em;">
            <a href="https://alldebrid.com/login" target="_blank" style="color:#e74c3c;">Inicia sesiÃ³n en AllDebrid</a>
            para ver tus claves.
          </div>

          <ul id="km-list" class="km-list"></ul>

          <div class="km-create">
            <input type="text" id="km-new-name" placeholder="Nombre (ej. Extension)" class="search-input"
              style="font-size:14px; padding:8px;">
            <button id="km-create-btn" class="primary-btn" style="padding:8px; margin-top:5px; font-size:14px;">â• Crear
              Nueva</button>
          </div>
        </div>
      </div>
    </div>

    <div id="files-view" class="view-section hidden">
      <div class="welcome-bar">
        <span id="user-welcome">Usuario</span>
        <span id="files-count" class="count-badge">0 ficheros</span>
      </div>

      <div id="loading" class="hidden">Cargando contenido...</div>

      <div id="no-results" class="hidden" style="text-align:center; padding:20px; color:#777">
        No se encontraron coincidencias.
      </div>
      <div id="error-msg" class="error hidden"></div>

      <!-- LISTA DESCARGANDO -->
      <ul id="list-downloading" class="file-list-container"></ul>

      <!-- LISTA COMPLETADOS -->
      <ul id="list-completed" class="file-list-container hidden"></ul>
    </div>
  </div>

  <script type="module" src="manager.js"></script>
</body>

</html>